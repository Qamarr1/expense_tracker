<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Income Â· Expense Tracker</title>
  <link rel="stylesheet" href="/static/style.css" />
  <!-- Chart.js needed for the small bar chart -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>
<body>
  <!-- Sidebar (keep same structure as your app) -->
  <aside class="sidebar">
    <div class="brand-min">Expense Tracker</div>
    <nav class="nav">
      <a class="nav-item" href="/dashboard" data-nav="dashboard">Dashboard</a>
      <a class="nav-item active" href="/income-ui" data-nav="income">Income</a>
      <a class="nav-item" href="/expenses-ui" data-nav="expenses">Expenses</a>
      <a class="nav-item" href="/docs" target="_blank">API Docs</a>
    </nav>
    <div class="sidebar-foot">v1.0</div>
  </aside>

  <!-- Main -->
  <main class="main">
    <header style="display:flex;justify-content:space-between;align-items:center;">
      <h1>Income</h1>
      <div style="display:flex;gap:10px">
        <button id="add-income" class="btn btn-primary">+ Add Income</button>
        <button id="refresh" class="btn btn-primary">Refresh</button>
        <button id="export-income" class="btn">Export CSV</button>
      </div>
    </header>

    <!-- Overview (bar) -->
    <section class="card" style="margin-bottom:18px;">
      <h3 style="margin:0;color:#9ca3af;">Income Overview</h3>
      <div style="height:260px;margin-top:8px;">
        <canvas id="income-bar"></canvas>
      </div>

      <p style="color:#9ca3af;margin:10px 0 4px;">
        Track your earnings over time and analyze your income trends.
      </p>

      <!-- ðŸ”µ Stats with pill-style labels -->
      <div id="income-stats" class="stats-wrap">
        <div>
          <span class="stat-badge">Total income this month</span>
          <span class="stat-value value-strong">â€”</span>
        </div>
        <div>
          <span class="stat-badge">Average income per month</span>
          <span class="stat-value value-strong">â€”</span>
        </div>
        <div>
          <span class="stat-badge">Biggest income source</span>
          <span class="stat-value value-strong">â€”</span>
        </div>
      </div>
    </section>

    <!-- Income Sources list -->
    <section class="card" style="margin-top:16px;">
      <h3 style="margin:0 0 10px;color:#9ca3af;">Income Sources</h3>

      <!-- Filters -->
      <div class="section-head" style="margin-bottom:8px;">
        <div class="filters-row">
          <input id="income-from" class="input input-sm" type="date" />
          <input id="income-to" class="input input-sm" type="date" />
          <input id="income-search" class="input input-sm input-search-wide" type="text"
            placeholder="Search by name or noteâ€¦" />
          <button id="clear-income-filters" class="btn"
                  style="padding:6px 12px;font-size:0.8rem;">
            Reset
          </button>
        </div>
      </div>

      <div id="income-list" class="list"></div>
    </section>
  </main>

  <!-- Add/Edit modal -->
  <div id="inc-modal-backdrop" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,.5);align-items:center;justify-content:center;z-index:9999;">
    <div class="card" style="width:min(560px,92%);">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;">
        <h3 style="margin:0;color:#e9edf2;">Add Income</h3>
        <button id="close-inc-modal" class="icon-btn" title="Close">âœ–</button>
      </div>

      <div style="display:flex;flex-direction:column;gap:10px">
        <label>Income Name
          <input id="in-name" class="input" placeholder="e.g., Salary" />
        </label>
        <label>Amount (EUR)
          <input id="in-amount" class="input" type="number" step="0.01" placeholder="e.g., 1200.00" />
        </label>
        <label>Date (YYYY-MM-DD)
          <input id="in-date" class="input" type="date" />
        </label>
        <label>Note (optional)
          <textarea id="in-note" class="input" rows="3" placeholder="Any extra infoâ€¦"></textarea>
        </label>
      </div>

      <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:12px;">
        <button id="cancel-inc-modal" class="btn">Cancel</button>
        <button id="save-income" class="btn btn-primary">Save</button>
      </div>
    </div>
  </div>

  <!-- Shared helpers FIRST (ok if 404, just an empty file later) -->
  <script src="/static/icons.js"></script>

  <!-- Page script LAST; bump ?v when you change JS -->
  <script src="/static/income.js?v=30"></script>
</body>
</html>
